<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>재고관리 시스템</title>
    <style>
        /* 배너 숨김 최적화 */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden; /* 이 컨테이너를 벗어나는 내용은 숨김 */
            background-color: #ffffff;
        }

        /* 아이프레임 스타일 */
        #appFrame {
            width: 100%;
            /* 배너 높이(50px)만큼 키워서 아래가 잘리지 않게 함 */
            height: calc(100% + 0px); 
            border: none;
            
            /* 배너 높이(50px)만큼 위로 끌어올려서 배너를 숨김 */
            margin-top: 0px; 
            
            /* ★ 아이폰에서 스크롤 부드럽게 만드는 필수 코드 ★ */
            -webkit-overflow-scrolling: touch; 
            
            /* 로딩 전에는 숨겨둠 */
            display: none; 
        }

        /* 로딩 메시지 스타일 */
        #loader {
            position: fixed; inset: 0; 
            display: flex; flex-direction: column;
            align-items: center; justify-content: center; 
            font-family: sans-serif; font-size: 14px; color: #666;
        }

        .spinner {
            width: 30px; height: 30px; border: 3px solid #ddd;
            border-top-color: #333; border-radius: 50%;
            animation: spin 0.8s linear infinite; margin-bottom: 15px;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <!-- 로딩 메시지 -->
    <div id="loader">
        <div>시스템 연결 중...</div>
    </div>

    <!-- 구글 앱이 들어갈 액자 -->
    <iframe id="appFrame"></iframe>

    <script>
        // ▼▼▼ [최적화] 외부 JSON 불러오기(fetch) 제거하고 직접 입력 ▼▼▼
        // 여기에 아이디와 구글 배포 주소를 직접 적으세요. 
        // 외부 통신이 사라져서 0.5초 이상 빨라집니다.
        const ROUTES = {
            "test": "https://www.naver.com/",
            "artpresso": "https://script.google.com/macros/s/AKfycbyUQqAQ7ebtSpPxwXfUdetis7XkN4zy_9L2sM6bZeTYdamHdzCdlA2J39GNmY71U8m7qA/exec"
        };

        // 1. 주소창 ID 파싱
        const params = new URLSearchParams(window.location.search);
        const clientId = params.get('id');
        const loaderMsg = document.getElementById('msg');
        const iframe = document.getElementById('appFrame');
        const loader = document.getElementById('loader');

        if (!clientId) {
            loaderMsg.innerHTML = "잘못된 접근입니다.<br>(ID가 없습니다)";
        } else {
            // 2. 즉시 주소 찾기 (대기 시간 0초)
            const realUrl = ROUTES[clientId];

            if (realUrl) {
                // 구글 앱 로딩 시작
                iframe.src = realUrl;
                
                // [팁] 아이프레임이 로드되면 로딩화면을 없앰 (깜빡임 최소화)
                iframe.onload = function() {
                    loader.style.display = 'none';
                    iframe.style.display = 'block';
                };
            } else {
                loaderMsg.innerHTML = "등록되지 않은 ID입니다.<br>(" + clientId + ")";
            }
        }
    </script>
</body>
</html>
